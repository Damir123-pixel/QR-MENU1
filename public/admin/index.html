<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="shortcut icon" type="image/png" href="logo.png">
  <title>–ê–¥–º–∏–Ω –ü–∞–Ω–µ–ª—å</title>
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet' />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      display: flex;
      height: 100vh;
      background-color: #201a1a;
    }

    .sidebar {
      width: 220px;
      background-color: #2c3e50;
      color: white;
      padding: 20px;
      display: flex;
      flex-direction: column;
    }

    .sidebar h2 {
      margin-bottom: 30px;
      font-size: 22px;
      text-align: center;
    }

    .sidebar a {
      text-decoration: none;
      color: white;
      margin: 10px 0;
      padding: 10px;
      border-radius: 8px;
      transition: background 0.2s ease;
    }

    .sidebar a:hover {
      background-color: #34495e;
    }

    .content {
      flex: 1;
      padding: 30px;
    }

    .content h1 {
      margin-bottom: 20px;
    }

    .logout-btn {
      margin-top: auto;
      background: #e74c3c;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s ease;
    }

    .logout-btn:hover {
      background: #c0392b;
    }

    
      .sidebar {
        width: 150px;
        padding: 10px;
      }

      .sidebar h2 {
        font-size: 16px;
      }

      .sidebar a {
        font-size: 12px;
        padding: 6px;
      }

      .content {
        padding: 20px;
        color:white
      }
    
  </style>
</head>
<body>

  <div class="sidebar">
    <h2>–ê–¥–º–∏–Ω–∫–∞</h2>
    <a href="profile.html">üìä –ü–∞–Ω–µ–ª—å</a>
    <a href="#">üì¶ –¢–æ–≤–∞—Ä—ã</a>
    <a href="zakaz.html">üìÅ –ó–∞–∫–∞–∑—ã</a>
    <a href="#"><i class='bx bxs-time' ></i> –ë—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å</a>
    <a href="#">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</a>
    <button class="logout-btn" onclick="logout()">–í—ã–π—Ç–∏</button>
  </div>

  <div class="content">
    <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h1>
    <p>–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–º–∏, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∑–∞–∫–∞–∑—ã –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.</p>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCClVQXq8Y5lk2mDHznmvojt9JnLUp6yeQ",
      authDomain: "qr-menu-c4ae0.firebaseapp.com",
      projectId: "qr-menu-c4ae0",
      storageBucket: "qr-menu-c4ae0.appspot.com",
      messagingSenderId: "474351769143",
      appId: "1:474351769143:web:a9e192499f96dc0e4011b2",
      measurementId: "G-BJ03P7FWGD"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
    onAuthStateChanged(auth, (user) => {
      if (!user) {
        window.location.href = "login.html";
      }
    });

    // –í—ã—Ö–æ–¥
    window.logout = function () {
      signOut(auth)
        .then(() => window.location.href = "login.html")
        .catch(err => alert("–û—à–∏–±–∫–∞ –≤—ã—Ö–æ–¥–∞: " + err.message));
    };
  </script>
<script type="module" src="admin.js"></script>
<link rel="stylesheet" href="admin.css">

<script>
  import { signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

onAuthStateChanged(auth, (user) => {
  if (!user) {
    // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Äî —Å—Ä–∞–∑—É –Ω–∞ login.html
    window.location.href = "login.html";
  } else {
    // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω ‚Äî –ø—Ä–æ–≤–µ—Ä–∏–º –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏
    const loginTime = localStorage.getItem('loginTime');
    const now = Date.now();

    if (!loginTime) {
      // –ï—Å–ª–∏ –≤—Ä–µ–º–µ–Ω–∏ –Ω–µ—Ç ‚Äî –∑–∞–ø–∏—à–µ–º —Ç–µ–∫—É—â–µ–µ
      localStorage.setItem('loginTime', now);
    } else {
      const elapsed = now - parseInt(loginTime, 10);
      const sevenHours = 7 * 60 * 60 * 1000; // 7 —á–∞—Å–æ–≤ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

      if (elapsed > sevenHours) {
        // –í—Ä–µ–º—è —Å–µ—Å—Å–∏–∏ –≤—ã—à–ª–æ ‚Äî –¥–µ–ª–∞–µ–º –≤—ã—Ö–æ–¥ –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç
        signOut(auth).then(() => {
          localStorage.removeItem('loginTime'); // –æ—á–∏—Å—Ç–∏–º –≤—Ä–µ–º—è
          window.location.href = "login.html";
        });
      }
    }
  }
});

</script>

</body>
</html>
